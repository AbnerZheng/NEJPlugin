<idea-plugin version="2">
    <id>com.netease.NEJ</id>
    <name>NEJ</name>
    <version>0.1</version>
    <vendor email="abnerzheng@gmail.com" url="">Abner Zheng</vendor>

    <description><![CDATA[
            NEJ support for Intellij IDEA/WebStorm
            <br>
            <br>

            目前还在开发中，有问题/需求请联系我。 PoPo: hzzhenglu, mail: abnerzheng@gmail.com
            感谢Do more Dojo 插件，它给了我很多帮助,这里大量的代码都借鉴于它
      ]]></description>

    <change-notes><![CDATA[
            <b>0.1 </b>
            <ul>
                <li>支持NEJ define路径解析</li>
            </ul>
            Full change-log is available on the github page.
      ]]>
    </change-notes>

    <idea-version since-build="107.105"/>

    <depends>JavaScript</depends>
    <depends>com.intellij.modules.xml</depends>

    <application-components>
        <!-- Add your application components here -->
    </application-components>

    <project-components>
        <component>
            <implementation-class>com.netease.NEJ.intellij.components.DojoSettingsDetectionComponent
            </implementation-class>
        </component>
    </project-components>

    <actions>
        <group id="com.chrisfolger.needsmoredojo.refactoring">
            <add-to-group group-id="RefactoringMenu" anchor="first"/>

            <group id="com.chrisfolger.needsmoredojo.refactoring.menu.items">
                <action id="com.chrisfolger.needsmoredojo.refactoring.menu.convertoutil" class="com.netease.NEJ.intellij.actions.ConvertToUtilAction" text="Convert class module to util module" description="Converts a normal dojo class to use the util pattern">
                </action>
                <action id="com.chrisfolger.needsmoredojo.refactoring.menu.convertclass" class="com.netease.NEJ.intellij.actions.ConvertToClassAction" text="Convert util module to class module" description="Converts a dojo util module to be an instantiable class">
                </action>
            </group>

            <separator/>
        </group>

        <action id="com.chrisfolger.needsmoredojo.actions.jumptoattachpoint"
                class="com.netease.NEJ.intellij.actions.JumpToAttachPointAction" text="Attach Point..."
                description="Jump to a dojo attach point in the widget's template html file ">
            <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl O" second-keystroke="A"/>
            <add-to-group group-id="GoToTargetEx"/>
        </action>

        <group id="com.chrisfolger.needsmoredojo.code" popup="true" text="Needs More Dojo">
            <add-to-group group-id="CodeMenu" anchor="first"/>

            <group id="com.chrisfolger.needsmoredojo.code.menu.items">
                <action id="com.chrisfolger.needsmoredojo.refactoring.menu.organizeamdimports" class="com.netease.NEJ.intellij.actions.OrganizeAMDImportsAction" text="Organize AMD Imports" description="Organizes (reorders) AMD import statements">
                    <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl O" second-keystroke="1"/>
                </action>
                <action id="com.chrisfolger.needsmoredojo.refactoring.menu.addimport" class="com.netease.NEJ.intellij.actions.AddNewImportAction" text="Add new AMD import" description="Add a new AMD import to a dojo module">
                    <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl O" second-keystroke="2"/>
                </action>
                <action id="com.chrisfolger.needsmoredojo.refactoring.menu.removeunusedimports" class="com.netease.NEJ.intellij.actions.DeleteAction" text="Remove Unused Imports" description="Removes unused AMD imports">
                    <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl O" second-keystroke="3"/>
                </action>
                <action id="com.chrisfolger.needsmoredojo.refactoring.menu.removesingleimport" class="com.netease.NEJ.intellij.actions.DeleteSingleImportAction" text="Remove Selected Import" description="Removes the current AMD import">
                    <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl O" second-keystroke="4"/>
                </action>
                <action id="com.chrisfolger.needsmoredojo.refactoring.menu.togglepathsyntax" class="com.netease.NEJ.intellij.actions.TogglePathSyntaxAction" text="Toggle AMD Import Path Syntax" description="Toggles between absolute and relative path syntax">
                    <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl O" second-keystroke="S"/>
                </action>

                <separator/>

                <action id="com.chrisfolger.needsmoredojo.actions.reorderimport.movedown"
                        class="com.netease.NEJ.intellij.actions.MoveImportDownAction" text="Move Import Down"
                        description="Move an AMD import down in the list">
                    <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt PAGE_DOWN"/>
                    <add-to-group group-id="CodeMenu" anchor="after" relative-to-action="MoveLineUp"/>
                </action>

                <action id="com.chrisfolger.needsmoredojo.actions.reorderimport.moveup"
                        class="com.netease.NEJ.intellij.actions.MoveImportUpAction" text="Move Import Up"
                        description="Move an AMD import up in the list">
                    <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt PAGE_UP"/>
                    <add-to-group group-id="CodeMenu" anchor="after" relative-to-action="MoveLineUp"/>
                </action>

                <action id="com.chrisfolger.needsmoredojo.actions.sendtobeginning"
                        class="com.netease.NEJ.intellij.actions.SendToBeginningAction" text="Send Import to Beginning"
                        description="Send an AMD import to the beginning of the list">
                    <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl O" second-keystroke="HOME"/>
                    <add-to-group group-id="CodeMenu" anchor="after" relative-to-action="MoveLineUp"/>
                </action>

                <action id="com.chrisfolger.needsmoredojo.actions.sendtoend"
                        class="com.netease.NEJ.intellij.actions.SendToEndAction" text="Send Import to End"
                        description="Send an AMD import to the bottom of the list">
                    <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl O" second-keystroke="END"/>
                    <add-to-group group-id="CodeMenu" anchor="after" relative-to-action="MoveLineUp"/>
                </action>

                <separator/>

                <action id="com.chrisfolger.needsmoredojo.refactoring.menu.findcyclicdependencies" class="com.netease.NEJ.intellij.actions.FindCyclicDependenciesAction" text="Find Cyclic AMD Dependencies" description="Searches for cyclic dependencies in AMD modules">
                    <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl O" second-keystroke="C"/>
                </action>
            </group>
        </group>
    </actions>

    <extensions defaultExtensionNs="com.intellij">
        <!--<inspectionToolProvider implementation="MismatchedImportsProvider"/>-->
        <!--<inspectionToolProvider implementation="UnusedImportsProvider"/>-->
        <!--<inspectionToolProvider implementation="CyclicDependencyProvider"/>-->

        <gotoDeclarationHandler implementation="com.netease.NEJ.intellij.reference.AttachPointGotoDeclarationHandler"/>
        <gotoDeclarationHandler implementation="com.netease.NEJ.intellij.reference.ImportGotoDeclarationHandler"/>
        <gotoDeclarationHandler implementation="com.netease.NEJ.intellij.reference.ThisInheritedGotoDeclarationHandler"/>
        <gotoDeclarationHandler implementation="com.netease.NEJ.intellij.reference.MethodGotoDeclarationHandler"/>

        <!--
        Removed these until version 0.8
        <moduleType id="DOJO_TOOLKIT_MODULE" implementationClass="DojoToolkitModuleType" classpathProvider="true"/>
        <moduleConfigurationEditorProvider implementation="DojoToolkitModuleEditorProvider"/>
        -->

        <projectConfigurable implementation="com.netease.NEJ.intellij.configurable.NEJSettingsConfigurable"></projectConfigurable>

        <psi.referenceContributor
                implementation="com.netease.NEJ.intellij.reference.NlsLookupReferenceContributor"/>

        <refactoring.elementListenerProvider implementation="com.netease.NEJ.intellij.refactoring.RenameRefactoringProvider"/>
        <refactoring.elementListenerProvider implementation="com.netease.NEJ.intellij.refactoring.MoveRefactoringProvider"/>

        <projectService serviceInterface="com.netease.NEJ.core.settings.NEJSettings" serviceImplementation="com.netease.NEJ.core.settings.NEJSettings">
        </projectService>

        <projectService serviceInterface="com.netease.NEJ.core.amd.naming.MismatchedImportsDetectorCache" serviceImplementation="com.netease.NEJ.core.amd.naming.MismatchedImportsDetectorCache">
        </projectService>

        <!-- overrides the default JavaScript unresolved variable inspection so that we are able to resolve attach points. Otherwise there
            is no way to provide references to attach point variables -->
        <localInspection language="JavaScript" groupPath="JavaScript" shortName="JSUnresolvedVariable"
                         key="js.unresolved.variable.inspection.name" groupKey="js.inspection.group.name" enabledByDefault="true"
                         level="WEAK WARNING" implementationClass="com.netease.NEJ.intellij.inspections.DojoUnresolvedVariableInspection" unfair="true"/>
    </extensions>
</idea-plugin>